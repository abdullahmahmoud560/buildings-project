    <!DOCTYPE html>
    <html lang="ar" dir="rtl">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ุฏููู ุงููุฌูุนุงุช ุงูุณูููุฉ ูู ุจุบุฏุงุฏ</title>
        <link rel="icon" href="../images/icon.png" type="image/png">
        <link rel="stylesheet" href="../css/styles.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="../js/script.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    </head>
    <body class="main-page-background">
    <header class="header-container text-light py-2 shadow">
        <div class="container d-flex justify-content-between align-items-center flex-wrap">
            <!-- ุงููุณู ุงูุฃูุณุฑ: ุงููุงุชู -->
            <div class="d-flex align-items-center phone-section">
                <img src="../images/CallUs2.png" alt="Phone Icon" width="30" height="30" class="me-2">
                <a href="tel:07716361821" class="text-light text-decoration-none fs-5 phone-number">07716361821</a>
            </div>

            <!-- ุงููุณู ุงูุฃูุณุท: ุงูุนููุงู -->
            <div class="text-center flex-grow-1 title-section">
                <h3 class="mb-0 fs-4 fw-bold">ุฏููู ุงููุฌูุนุงุช ุงูุณูููุฉ ูู ุจุบุฏุงุฏ</h3>
            </div>

            <!-- ุงููุณู ุงูุฃููู: ุงูุจุญุซ ู "ูู ูุญู" -->
            <div class="d-flex align-items-center search-section">
                <input type="text" id="searchInput" class="form-control me-2 search-box" placeholder="๐ ุงุจุญุซ ุนู ูุฌูุน">
                <a href="contact.html" class="about-link">ูู ูุญู</a>
            </div>
        </div>
    </header>

        
        
        
        


        <div class="container mt-5">


            <div class="search-filters-container container mt-4">   
                <div class="row justify-content-between">
                    <div class="col-md-2">
                        <label for="region" class="form-label">ุงุฎุชุฑ ุงูููุทูุฉ</label>
                        <select id="region" class="form-select">
                            <option value="">ุงุฎุชุฑ...</option>
                            <option value="reign1">ุงููุฑุฎ</option>
                            <option value="reign2">ุงูุฑุตุงูุฉ</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label for="type" class="form-label">ุงุฎุชุฑ ุงูููุน</label>
                        <select id="type" class="form-select">
                            <option value="">ุฃุฎุชุงุฑ...</option>
                            <option value="building">ุนููุฏู/ุนูุงุฑุงุช</option>
                            <option value="houses">ุงููู/ููุงุฒู</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label for="services" class="form-label">ุงูุฎุฏูุงุช</label>
                        <select id="services" class="form-select">
                            <option value="">ุฃุฎุชุงุฑ...</option>
                            <option value="">ุงููู</option>
                            <option value="ูุฑูุฒ ุชุฌุงุฑู">ูุฑูุฒ ุชุฌุงุฑู</option>
                            <option value="ููุนุจ ููุฃุทูุงู">ููุนุจ ููุฃุทูุงู</option>
                            <option value="ูุณุจุญ">ูุณุจุญ</option>
                            <option value="ูุฏุฑุณุฉ">ูุฏุฑุณุฉ</option>
                            <option value="ุญุฏุงุฆู">ุญุฏุงุฆู</option>
                            <option value="ูุฑูุฒ ุตุญู">ูุฑูุฒ ุตุญู</option>
                            <option value="ููุงูู ุณูุงุฑุงุช">ููุงูู ุณูุงุฑุงุช</option>
                        </select>
                    </div>
                    
                    <div class="col-md-2">
                        <label for="availability" class="form-label">ุงูุชูุงูุฑ</label>
                        <select id="availability" class="form-select">
                            <option value="">ุฃุฎุชุงุฑ...</option>
                            <option value="">ุงููู</option>
                            <option value="ุฌุงูุฒ ููุณูู">ุฌุงูุฒ ููุณูู</option>
                            <option value="ุบูุฑ ุฌุงูุฒ ููุณูู">ุบูุฑ ุฌุงูุฒ ููุณูู</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label for="minPrice" class="form-label">ุฃุฏูู ุณุนุฑ</label>
                        <input type="number" id="minPrice" class="form-control" placeholder="ุฃุฏุฎู ุฃุฏูู ุณุนุฑ">
                    </div>
                    <div class="col-md-2">
                        <label for="maxPrice" class="form-label">ุฃุนูู ุณุนุฑ</label>
                        <input type="number" id="maxPrice" class="form-control" placeholder="ุฃุฏุฎู ุฃุนูู ุณุนุฑ">
                    </div>
                </div> 
            </div>

            <div class="container d-flex justify-content-center">
                <div class="row justify-content-center w-100">
                    <div class="col-md-2 d-flex justify-content-center align-items-center" style="margin: 25px;">
                        <button type="button" class="btn btn-primary w-100" id="search">ุจุญุซ</button>
                    </div>
                </div>
            </div>    
 
            <script>

document.getElementById('searchInput').addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
        var query = document.getElementById('searchInput').value.toLowerCase();
        fetchAndMergeFiles().then(mergedData => {
            let searchResults = [];

            for (let i = 0; i < mergedData.length; i++) {
                if ((i == 0 || i == 2) && mergedData[i].building) {
                    for (let j = 0; j < mergedData[i].building.length; j++) {
                        if (mergedData[i].building[j].name.toLowerCase() === query) {
                            searchResults.push({
                                ...mergedData[i].building[j],
                                itemIndex: j,
                                selectedType: 'building',
                                region: i === 0 ? 'reign1' : 'reign2' // ุชุญุฏูุฏ ุงูู region ุจูุงุกู ุนูู ูููุฉ i
                            });
                        }
                    }
                } 
                else if ((i == 1 || i == 3) && mergedData[i].houses) {
                    for (let j = 0; j < mergedData[i].houses.length; j++) {
                        if (mergedData[i].houses[j].name.toLowerCase() === query) {
                            searchResults.push({
                                ...mergedData[i].houses[j],
                                itemIndex: j,
                                selectedType: 'houses',
                                region: i === 1 ? 'reign1' : 'reign2' // ุชุญุฏูุฏ ุงูู region ุจูุงุกู ุนูู ูููุฉ i
                            });
                        }
                    }
                }
            }

            if (searchResults.length > 0) {
                localStorage.setItem('searchResults', JSON.stringify(searchResults));
                window.location.href = 'resultSearch.html';  // ุชุฃูุฏ ูู ุชุนุฏูู ูุฐุง ุงููุณุงุฑ ูููุงูู ุงููุณุงุฑ ุงูุตุญูุญ ูุตูุญุฉ ุงููุชุงุฆุฌ ูู ูููุนู
            } else {
                alert('ูู ูุชู ุงูุนุซูุฑ ุนูู ุฃู ูุชุงุฆุฌ.');
            }
        }).catch(error => {
            console.error("ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงูุจูุงูุงุช:", error);
        });
    }
});

            
                // ุฑุจุท ุฒุฑ ุงูุจุญุซ ุจุงูุฏุงูุฉ
                document.getElementById('searchButton').addEventListener('click', function() {
                    var query = document.getElementById('searchInput').value;
            
                    // ุงุณุชุฏุนุงุก ุฏุงูุฉ ุฏูุฌ ุงูุจูุงูุงุช ุจุนุฏ ุงูููุฑ ุนูู ุฒุฑ ุงูุจุญุซ
                    fetchAndMergeFiles().then(mergedData => {
                        console.log('ุงูุจูุงูุงุช ุงููุฏูุฌุฉ:', mergedData);
                    });
                });
            
                // ุฏุงูุฉ ูุชุญููู ูุฏูุฌ ุงููููุงุช
                async function fetchAndMergeFiles() {
                    // ุงููููุงุช ุงูุชู ุณูุชู ุชุญููููุง
                    const filesToFetch = [
                        '/data/reign1B.json',
                        '/data/reign1H.json',
                        '/data/reign2B.json',
                        '/data/reign2H.json',
                    ];
            
                    // ุชุญููู ุงููููุงุช
                    const responses = await Promise.all(filesToFetch.map(file => fetch(file)));
                    const data = await Promise.all(responses.map(response => response.json()));
            
                    // ุฏูุฌ ุงูุจูุงูุงุช ุจุนุฏ ุงูุชุญูู ูู ููุน ุงูุจูุงูุงุช
                    const mergedData = data.reduce((acc, currentData) => {
                        if (Array.isArray(currentData)) {
                            return [...acc, ...currentData];  // ุฏูุฌ ุงููุตูููุงุช
                        } else if (typeof currentData === 'object') {
                            // ุฏูุฌ ุงููุงุฆูุงุช
                            return [...acc, ...Object.values(currentData)]; 
                        } else {
                            console.warn('ุงูุจูุงูุงุช ููุณุช ูุตูููุฉ ุฃู ูุงุฆู:', currentData);
                            return acc;  // ุชุฌุงูู ุงูุจูุงูุงุช ุบูุฑ ุงููุตูููุฉ ุฃู ุงููุงุฆูุงุช
                        }
                    }, []);
            
                    return mergedData;  // ุฅุฑุฌุงุน ุงูุจูุงูุงุช ุงููุฏูุฌุฉ
                }
            </script>
            
    </div>
            <!-- ุฅุถุงูุฉ ูุฑูุณูู ููุตูุฑ ุงููุชุบูุฑุฉ -->
                <div id = "img" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000" style="margin-top: 50px;">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="../images/IMG_1239.png" class="d-block mx-auto" alt="ูุฌูุน ุณููู 1">
                        </div>
                        <div class="carousel-item">
                            <img src="../images/IMG_1240.png" class="d-block mx-auto" alt="ูุฌูุน ุณููู 2">
                        </div>
                    </div>
                    
                    <button class="carousel-control-prev" type="button" data-bs-target="#img" data-bs-slide="prev" onmouseover="this.style.backgroundColor='transparent'; this.style.boxShadow='none'" onmouseout="this.style.backgroundColor=''; this.style.boxShadow=''">
                        <span class="carousel-control-prev-icon"></span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#img" data-bs-slide="next" onmouseover="this.style.backgroundColor='transparent'; this.style.boxShadow='none'" onmouseout="this.style.backgroundColor=''; this.style.boxShadow=''">
                        <span class="carousel-control-next-icon"></span>
                    </button>                
                </div>
                
            
                <!-- ุจุงูู ูุญุชูู ุงูุตูุญุฉ -->
            

        

            <div class="sold-out-section mt-5">
                <h2 class="text-center mb-4 soldout-toggle">ุงููุฑ ููุง ูุนุฑุถ ุงููุฌูุนุงุช ุงููุจุงุนุฉ</h2>
                <ul id="soldout-list" class="list-group text-end" style="display: none;"></ul>
            </div>

        </div> <!-- End container -->

        <!-- Moving the map to the bottom of the page -->
        <div style="width: 100%; height: 500px; margin-bottom: -47px;">
            <iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
            src="https://maps.google.com/maps?q=Baghdad&t=&z=12&ie=UTF8&iwloc=&output=embed">
            </iframe>
        </div>

        <footer class="footer mt-5 py-3 text-center">
            <div class="container">
                <p class="mb-0">ุฌููุน ุงูุญููู ูุญููุธุฉ &copy; 2024 - ุฏููู ุงููุฌูุนุงุช ุงูุณูููุฉ ูู ุจุบุฏุงุฏ</p>
                <p>Developed By: <span class="text-light">Shahad & Saja</span></p>
            </div>
        </footer>
    </body>
    </html>
